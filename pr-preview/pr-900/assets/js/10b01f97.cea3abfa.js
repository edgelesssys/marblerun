"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5423],{23796:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"deployment/cloud","title":"Cloud deployment","description":"This guide walks you through setting up MarbleRun on different CSP offerings individually.","source":"@site/versioned_docs/version-1.1/deployment/cloud.md","sourceDirName":"deployment","slug":"/deployment/cloud","permalink":"/marblerun/pr-preview/pr-900/1.1/deployment/cloud","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.1/deployment/cloud.md","tags":[],"version":"1.1","frontMatter":{},"sidebar":"docs","previous":{"title":"Deployment","permalink":"/marblerun/pr-preview/pr-900/1.1/category/deployment"},"next":{"title":"On-premises","permalink":"/marblerun/pr-preview/pr-900/1.1/deployment/on-prem"}}');var r=i(74848),t=i(28453);const l={},o="Cloud deployment",a={},d=[{value:"Azure confidential computing VMs",id:"azure-confidential-computing-vms",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Deploy MarbleRun",id:"deploy-marblerun",level:3},{value:"Alibaba Cloud Elastic Compute Service",id:"alibaba-cloud-elastic-compute-service",level:2},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Deploy MarbleRun",id:"deploy-marblerun-1",level:3},{value:"Azure Kubernetes Services (AKS)",id:"azure-kubernetes-services-aks",level:2},{value:"Prerequisites",id:"prerequisites-2",level:3},{value:"Deploy MarbleRun",id:"deploy-marblerun-2",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"cloud-deployment",children:"Cloud deployment"})}),"\n",(0,r.jsx)(n.p,{children:"This guide walks you through setting up MarbleRun on different CSP offerings individually."}),"\n",(0,r.jsx)(n.h2,{id:"azure-confidential-computing-vms",children:"Azure confidential computing VMs"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://azure.microsoft.com/en-us/solutions/confidential-compute/",children:"Azure confidential computing services"})," provide access to VMs with Intel SGX enabled in ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/virtual-machines/sizes/general-purpose/dcsv2-series",children:"DCsv2 VM instances"}),".\nThe description below uses a VM running Ubuntu 18.04."]}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/edgelesssys/ego#install",children:"Update and install EGo"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://docs.microsoft.com/en-us/azure/confidential-computing/quick-create-portal#3-install-the-intel-and-open-enclave-packages-and-dependencies",children:"Update and install the Azure DCAP client"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deploy-marblerun",children:"Deploy MarbleRun"}),"\n",(0,r.jsxs)(n.p,{children:["You can run MarbleRun standalone on your Azure DCsv2 VM, see our ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-900/1.1/deployment/standalone",children:"standalone guide"}),".\nAlternatively, you can install a Kubernetes cluster, probably the simplest option would be ",(0,r.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/start/",children:"minikube"}),", see our ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-900/1.1/deployment/kubernetes",children:"Kubernetes guide"})," on how to install MarbleRun in minikube."]}),"\n",(0,r.jsx)(n.h2,{id:"alibaba-cloud-elastic-compute-service",children:"Alibaba Cloud Elastic Compute Service"}),"\n",(0,r.jsxs)(n.p,{children:["With 7th generation ",(0,r.jsx)(n.a,{href:"https://www.alibabacloud.com/help/doc-detail/207734.htm",children:"security-enhanced ECS instances"})," users can try out and use Intel SGX on Alibaba Cloud.\nCurrently, security-enhanced instances are only available as part of an invitational preview."]}),"\n",(0,r.jsx)(n.p,{children:"The description below uses a VM running Ubuntu 18.04."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites-1",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Install Intel DCAP Quote Provider Library"}),"\n",(0,r.jsx)(n.p,{children:"Add the Intel SGX APT repository:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget -qO - https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key | sudo apt-key add -\necho 'deb [arch=amd64] https://download.01.org/intel-sgx/sgx_repo/ubuntu bionic main' | sudo tee /etc/apt/sources.list.d/intel-sgx.list\n"})}),"\n",(0,r.jsx)(n.p,{children:"Download and install the QPL:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt update\nsudo apt install libsgx-dcap-default-qpl\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Set configuration for Alibaba Cloud SGX remote attestation service"}),"\n",(0,r.jsxs)(n.p,{children:["Alibaba Cloud provides a PCCS for remote attestation, deployed on a per-region basis. For optimal stability it's recommended to access the service in your instance's region.\nThe configuration is set in ",(0,r.jsx)(n.code,{children:"/etc/sgx_default_qcnl.conf"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If your instance is assigned a public IP address, change the configuration to the following, where ",(0,r.jsx)(n.code,{children:"[Region-ID]"})," is the ID of your instance's region:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"PCCS_URL=https://sgx-dcap-server.[Region-ID].aliyuncs.com/sgx/certification/v3/\nUSE_SECURE_CERT=TRUE\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["If your instance is in a virtual private cloud and has only internal IP addresses, change the configuration to the following, where ",(0,r.jsx)(n.code,{children:"[Region-ID]"})," is the ID of your instance's region:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"PCCS_URL=https://sgx-dcap-server-vpc.[Region-ID].aliyuncs.com/sgx/certification/v3/\nUSE_SECURE_CERT=TRUE\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Currently, the Alibaba Cloud SGX remote attestation service is only supported within ",(0,r.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/beginner-guide/latest/regions-and-zones#concept-2459516",children:"mainland China regions"})]})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://github.com/edgelesssys/ego#install",children:"Update and install EGo"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"deploy-marblerun-1",children:"Deploy MarbleRun"}),"\n",(0,r.jsxs)(n.p,{children:["You can run MarbleRun standalone on your Alibaba Cloud ECS VM, see our ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-900/1.1/deployment/standalone",children:"standalone guide"}),".\nAlternatively, you can install a Kubernetes cluster, probably the simplest option would be ",(0,r.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/start/",children:"minikube"}),", see our ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-900/1.1/deployment/kubernetes",children:"Kubernetes guide"})," on how to install MarbleRun in minikube."]}),"\n",(0,r.jsx)(n.h2,{id:"azure-kubernetes-services-aks",children:"Azure Kubernetes Services (AKS)"}),"\n",(0,r.jsx)(n.p,{children:"Azure Kubernetes Service (AKS) offers a popular deployment technique relying on\nAzure's cloud resources. AKS hosts Kubernetes pods in Azure confidential compute\nVMs and exposes the underlying confidential compute hardware."}),"\n",(0,r.jsx)(n.h3,{id:"prerequisites-2",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.p,{children:["Follow the instructions on the ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/confidential-computing/confidential-enclave-nodes-aks-get-started",children:"AKS Confidential Computing Quick Start guide"}),"\nto provision an AKS cluster with Intel SGX enabled worker nodes."]}),"\n",(0,r.jsx)(n.h3,{id:"deploy-marblerun-2",children:"Deploy MarbleRun"}),"\n",(0,r.jsxs)(n.p,{children:["See our ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-900/1.1/deployment/kubernetes",children:"Kubernetes guide"})," on how to install MarbleRun in your AKS cluster."]})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);