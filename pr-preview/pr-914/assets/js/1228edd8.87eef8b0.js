"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1743],{28453:(e,r,n)=>{n.d(r,{R:()=>l,x:()=>d});var t=n(96540);const s={},o=t.createContext(s);function l(e){const r=t.useContext(o);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(o.Provider,{value:r},e.children)}},73317:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>i,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"deployment/standalone","title":"Standalone MarbleRun deployment","description":"This guide walks you through deploying MarbleRun standalone.","source":"@site/versioned_docs/version-1.9/deployment/standalone.md","sourceDirName":"deployment","slug":"/deployment/standalone","permalink":"/marblerun/pr-preview/pr-914/deployment/standalone","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.9/deployment/standalone.md","tags":[],"version":"1.9","frontMatter":{},"sidebar":"docs","previous":{"title":"Kubernetes","permalink":"/marblerun/pr-preview/pr-914/deployment/kubernetes"},"next":{"title":"Supported platforms","permalink":"/marblerun/pr-preview/pr-914/deployment/platforms/"}}');var s=n(74848),o=n(28453);const l={},d="Standalone MarbleRun deployment",i={},a=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Setup the Coordinator control plane",id:"setup-the-coordinator-control-plane",level:2},{value:"Run your workloads",id:"run-your-workloads",level:3}];function h(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"standalone-marblerun-deployment",children:"Standalone MarbleRun deployment"})}),"\n",(0,s.jsx)(r.p,{children:"This guide walks you through deploying MarbleRun standalone."}),"\n",(0,s.jsx)(r.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://github.com/edgelesssys/ego#install",children:"EGo"})," is installed."]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"setup-the-coordinator-control-plane",children:"Setup the Coordinator control plane"}),"\n",(0,s.jsxs)(r.p,{children:["You can download the ",(0,s.jsx)(r.a,{href:"https://github.com/edgelesssys/marblerun/releases/latest/download/coordinator-enclave.signed",children:"latest release"})," of our Coordinator control plane on GitHub.\nIf you prefer to build from source please refer to our ",(0,s.jsx)(r.a,{href:"https://github.com/edgelesssys/marblerun/blob/master/BUILD.md",children:"build guide"}),"."]}),"\n",(0,s.jsx)(r.p,{children:"You can then run the Coordinator's enclave:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"erthost build/coordinator-enclave.signed\n"})}),"\n",(0,s.jsx)(r.p,{children:"Per default, the Coordinator starts with the following default values. You can set your desired configuration by setting the environment variables."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Setting"}),(0,s.jsx)(r.th,{children:"Default Value"}),(0,s.jsx)(r.th,{children:"Environment Variable"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"the listener address for the gRPC server"}),(0,s.jsx)(r.td,{children:"localhost:2001"}),(0,s.jsx)(r.td,{children:"EDG_COORDINATOR_MESH_ADDR"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"the listener address for the HTTP server"}),(0,s.jsx)(r.td,{children:"localhost: 4433"}),(0,s.jsx)(r.td,{children:"EDG_COORDINATOR_CLIENT_ADDR"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"the DNS names and IPs for the cluster\u2019s root certificate"}),(0,s.jsx)(r.td,{children:"localhost"}),(0,s.jsx)(r.td,{children:"EDG_COORDINATOR_DNS_NAMES"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"the file path for storing sealed data"}),(0,s.jsx)(r.td,{children:"$PWD/marblerun-coordinator-data"}),(0,s.jsx)(r.td,{children:"EDG_COORDINATOR_SEAL_DIR"})]})]})]}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["The Coordinator's state is sealed to ",(0,s.jsx)(r.code,{children:"$PWD/marblerun-coordinator-data/sealed_data"}),". If you want a fresh restart remove this file first: ",(0,s.jsx)(r.code,{children:"rm $PWD/marblerun-coordinator-data/sealed_data"}),"."]})}),"\n",(0,s.jsxs)(r.p,{children:["The Coordinator is now in a pending state, waiting for a manifest.\nSee the ",(0,s.jsx)(r.a,{href:"/marblerun/pr-preview/pr-914/workflows/add-service",children:"how to add a service"})," documentation for more information on how to create and set a manifest."]}),"\n",(0,s.jsx)(r.h3,{id:"run-your-workloads",children:"Run your workloads"}),"\n",(0,s.jsxs)(r.p,{children:["You first need to build your workloads together with our Marble data plane.\nSee our guides for building ",(0,s.jsx)(r.a,{href:"/marblerun/pr-preview/pr-914/building-marbles/ego",children:"EGo"}),", ",(0,s.jsx)(r.a,{href:"/marblerun/pr-preview/pr-914/building-marbles/gramine",children:"Gramine"}),", and ",(0,s.jsx)(r.a,{href:"/marblerun/pr-preview/pr-914/building-marbles/occlum",children:"Occlum"})," workloads."]}),"\n",(0,s.jsx)(r.p,{children:"You can then run your Marble as follows:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"EDG_MARBLE_TYPE=<your_marble_type> erthost <your_marble_binary>\n"})}),"\n",(0,s.jsx)(r.p,{children:"Per default, a Marble starts with the following default values. You can set your desired configuration by setting the environment variables."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Setting"}),(0,s.jsx)(r.th,{children:"Default Value"}),(0,s.jsx)(r.th,{children:"Environment Variable"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"network address of the Coordinator\u2019s API for Marbles"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"localhost:2001"})}),(0,s.jsx)(r.td,{children:"EDG_MARBLE_COORDINATOR_ADDR"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsxs)(r.td,{children:["reference on one entry from your manifest\u2019s ",(0,s.jsx)(r.code,{children:"Marbles"})," section"]}),(0,s.jsx)(r.td,{children:"- (this needs to be set every time)"}),(0,s.jsx)(r.td,{children:"EDG_MARBLE_TYPE"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"local file path where the Marble stores its UUID"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"$PWD/uuid"})}),(0,s.jsx)(r.td,{children:"EDG_MARBLE_UUID_FILE"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"DNS names and IPs the Coordinator will issue the Marble\u2019s certificate for"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"$EDG_MARBLE_TYPE"})}),(0,s.jsx)(r.td,{children:"EDG_MARBLE_DNS_NAMES"})]})]})]})]})}function c(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}}}]);