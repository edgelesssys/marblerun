"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5589],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(96540);const s={},o=r.createContext(s);function a(e){const t=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:t},e.children)}},31531:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/quickstart-simulation","title":"Quickstart simulation mode","description":"Step 1: Install the control plane onto your cluster","source":"@site/versioned_docs/version-1.1/getting-started/quickstart-simulation.md","sourceDirName":"getting-started","slug":"/getting-started/quickstart-simulation","permalink":"/marblerun/pr-preview/pr-907/1.1/getting-started/quickstart-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.1/getting-started/quickstart-simulation.md","tags":[],"version":"1.1","frontMatter":{},"sidebar":"docs","previous":{"title":"Quickstart SGX","permalink":"/marblerun/pr-preview/pr-907/1.1/getting-started/quickstart-sgx"},"next":{"title":"Concepts","permalink":"/marblerun/pr-preview/pr-907/1.1/getting-started/concepts"}}');var s=n(74848),o=n(28453);const a={},i="Quickstart simulation mode",l={},c=[{value:"Step 1: Install the control plane onto your cluster",id:"step-1-install-the-control-plane-onto-your-cluster",level:2},{value:"Step 2: Deploy the demo application",id:"step-2-deploy-the-demo-application",level:2},{value:"Step 2.1: Configure MarbleRun",id:"step-21-configure-marblerun",level:3},{value:"Step 2.2: Deploy emojivoto",id:"step-22-deploy-emojivoto",level:3},{value:"Step 3: Watch it run",id:"step-3-watch-it-run",level:2},{value:"That\u2019s it \ud83d\udc4f",id:"thats-it-",level:2}];function d(e){const t={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"quickstart-simulation-mode",children:"Quickstart simulation mode"})}),"\n",(0,s.jsx)(t.h2,{id:"step-1-install-the-control-plane-onto-your-cluster",children:"Step 1: Install the control plane onto your cluster"}),"\n",(0,s.jsxs)(t.p,{children:["Install MarbleRun's ",(0,s.jsx)(t.em,{children:"Coordinator"})," control plane by running:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"marblerun install --simulation\n"})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"marblerun install"})," command generates a Kubernetes manifest with all the necessary control plane resources.\nThis includes a deployment for the Coordinator and for MarbleRun's ",(0,s.jsx)(t.a,{href:"/marblerun/pr-preview/pr-907/1.1/features/kubernetes-integration",children:"admission controller."}),"\nThe simulation flag tells MarbleRun that real SGX hardware might not be present and the SGX-layer should be emulated."]}),"\n",(0,s.jsx)(t.p,{children:"Wait for the control plane to finish installing:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"marblerun check\n"})}),"\n",(0,s.jsx)(t.p,{children:"This command will wait until all components of MarbleRun are ready to be used or return an error after a timeout period is reached."}),"\n",(0,s.jsx)(t.p,{children:"Port forward the Coordinator's Client API:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl -n marblerun port-forward svc/coordinator-client-api 4433:4433 --address localhost >/dev/null &\nexport MARBLERUN=localhost:4433\n"})}),"\n",(0,s.jsx)(t.h2,{id:"step-2-deploy-the-demo-application",children:"Step 2: Deploy the demo application"}),"\n",(0,s.jsxs)(t.p,{children:["To get a feel for how MarbleRun would work for one of your services, you can install a demo application.\nThe emojivoto application is a standalone Kubernetes application that uses a mix of gRPC and HTTP calls to allow the users to vote on their favorite emojis.\nCreated as a demo application for the popular ",(0,s.jsx)(t.a,{href:"https://linkerd.io",children:"Linkerd"})," service mesh, we've made a confidential variant that uses a confidential service mesh for all gRPC and HTTP connections.\nClone the ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto",children:"demo application's repository"})," from GitHub by running:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/edgelesssys/emojivoto && cd emojivoto\n"})}),"\n",(0,s.jsx)(t.h3,{id:"step-21-configure-marblerun",children:"Step 2.1: Configure MarbleRun"}),"\n",(0,s.jsxs)(t.p,{children:["MarbleRun guarantees that the topology of your distributed app adheres to a manifest specified in simple JSON.\nMarbleRun verifies the integrity of services, bootstraps them, and sets up encrypted connections between them.\nThe emojivoto demo already comes with a ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto/blob/main/tools/manifest.json",children:"manifest"}),", which you can deploy onto MarbleRun by running:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"marblerun manifest set tools/manifest.json $MARBLERUN --insecure\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Normally, the CLI will verify the Coordinators SGX quote every time it connects to the Coordinators REST interface.\nSince we run MarbleRun in simulation mode, and therefore don't actually generate a quote, we use the ",(0,s.jsx)(t.code,{children:"--insecure"})," flag to skip this verification."]}),"\n",(0,s.jsx)(t.p,{children:"You can check that the state of MarbleRun changed and is now ready to authenticate your services by running:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"marblerun status $MARBLERUN --insecure\n"})}),"\n",(0,s.jsx)(t.h3,{id:"step-22-deploy-emojivoto",children:"Step 2.2: Deploy emojivoto"}),"\n",(0,s.jsxs)(t.p,{children:["Finally, install the demo application onto your cluster.\nPlease make sure you have ",(0,s.jsx)(t.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm"}),' ("the package manager for Kubernetes") installed at least at Version v3.2.0.\nInstall emojivoto into the emojivoto namespace by running:']}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"helm install -f ./kubernetes/nosgx_values.yaml emojivoto ./kubernetes --create-namespace -n emojivoto\n"})}),"\n",(0,s.jsx)(t.h2,{id:"step-3-watch-it-run",children:"Step 3: Watch it run"}),"\n",(0,s.jsx)(t.p,{children:"You can now check the MarbleRun log and see the services being authenticated by the Coordinator."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl -n marblerun logs -f -l edgeless.systems/control-plane-component=coordinator\n"})}),"\n",(0,s.jsx)(t.p,{children:"Port forward the front-end web service to access it on your local machine by running:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-bash",children:"kubectl -n emojivoto port-forward svc/web-svc 8443:443 --address 0.0.0.0\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Now visit ",(0,s.jsx)(t.a,{href:"https://localhost:8443",children:"https://localhost:8443"}),".\nYou'll be presented with a certificate warning because your browser by default doesn't trust certificates signed by MarbleRun.\nYou can ignore this error for now and proceed to the website.",(0,s.jsx)(t.br,{}),"\n","Voila! Your emoji votes have never been safer!"]}),"\n",(0,s.jsx)(t.h2,{id:"thats-it-",children:"That\u2019s it \ud83d\udc4f"}),"\n",(0,s.jsx)(t.p,{children:"Congratulations, you\u2019re now a MarbleRun user! Here are some suggested next steps:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:["Explore how ",(0,s.jsx)(t.a,{href:"/marblerun/pr-preview/pr-907/1.1/features/secrets-management",children:"MarbleRun takes care of your secrets"})]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"/marblerun/pr-preview/pr-907/1.1/workflows/add-service",children:"Add your own service"})," to MarbleRun"]}),"\n",(0,s.jsxs)(t.li,{children:["Learn more about ",(0,s.jsx)(t.a,{href:"/marblerun/pr-preview/pr-907/1.1/getting-started/concepts",children:"MarbleRun\u2019s architecture"})]}),"\n",(0,s.jsxs)(t.li,{children:["Try out the full demo on ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto",children:"GitHub"})]}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Welcome to the MarbleRun community!"})]})}function h(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);