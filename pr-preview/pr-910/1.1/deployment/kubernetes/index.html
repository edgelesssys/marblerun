<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.1 docs-doc-page docs-doc-id-deployment/kubernetes" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Kubernetes MarbleRun deployment | MarbleRun</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.1"><meta data-rh="true" name="docsearch:version" content="1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.1"><meta data-rh="true" property="og:title" content="Kubernetes MarbleRun deployment | MarbleRun"><meta data-rh="true" name="description" content="This guide walks you through setting up MarbleRun in your Kubernetes cluster."><meta data-rh="true" property="og:description" content="This guide walks you through setting up MarbleRun in your Kubernetes cluster."><link data-rh="true" rel="icon" href="/marblerun/pr-preview/pr-910/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Deployment","item":"https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/category/deployment"},{"@type":"ListItem","position":2,"name":"Kubernetes","item":"https://docs.edgeless.systems/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes"}]}</script><script src="/marblerun/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/marblerun/pr-preview/pr-910/assets/css/styles.85a93fef.css">
<script src="/marblerun/pr-preview/pr-910/assets/js/runtime~main.abe250ed.js" defer="defer"></script>
<script src="/marblerun/pr-preview/pr-910/assets/js/main.10da4f9f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/marblerun/pr-preview/pr-910/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/marblerun/pr-preview/pr-910/"><div class="navbar__logo"><img src="/marblerun/pr-preview/pr-910/img/logo.svg" alt="MarbleRun Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/marblerun/pr-preview/pr-910/img/logo.svg" alt="MarbleRun Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes">1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/next/deployment/kubernetes">Next</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/deployment/kubernetes">1.8</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.7/deployment/kubernetes">1.7</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.6/deployment/kubernetes">1.6</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.5/deployment/kubernetes">1.5</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.4/deployment/kubernetes">1.4</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.3/deployment/kubernetes">1.3</a></li><li><a class="dropdown__link" href="/marblerun/pr-preview/pr-910/1.2/deployment/kubernetes">1.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes">1.1</a></li></ul></div><a href="https://github.com/edgelesssys/marblerun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.1"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/marblerun/pr-preview/pr-910/1.1/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/pr-preview/pr-910/1.1/category/getting-started"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/pr-preview/pr-910/1.1/category/features"><span title="Features" class="categoryLinkLabel_W154">Features</span></a><button aria-label="Expand sidebar category &#x27;Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/marblerun/pr-preview/pr-910/1.1/category/deployment"><span title="Deployment" class="categoryLinkLabel_W154">Deployment</span></a><button aria-label="Collapse sidebar category &#x27;Deployment&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/pr-preview/pr-910/1.1/deployment/cloud"><span title="Cloud" class="linkLabel_WmDU">Cloud</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/pr-preview/pr-910/1.1/deployment/on-prem"><span title="On-premises" class="linkLabel_WmDU">On-premises</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/marblerun/pr-preview/pr-910/1.1/deployment/kubernetes"><span title="Kubernetes" class="linkLabel_WmDU">Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/pr-preview/pr-910/1.1/deployment/standalone"><span title="Standalone" class="linkLabel_WmDU">Standalone</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/pr-preview/pr-910/1.1/category/workflows"><span title="Workflows" class="categoryLinkLabel_W154">Workflows</span></a><button aria-label="Expand sidebar category &#x27;Workflows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/pr-preview/pr-910/1.1/category/building-services"><span title="Building services" class="categoryLinkLabel_W154">Building services</span></a><button aria-label="Expand sidebar category &#x27;Building services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/marblerun/pr-preview/pr-910/1.1/examples"><span title="Examples" class="linkLabel_WmDU">Examples</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/pr-preview/pr-910/1.1/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->MarbleRun<!-- --> <b>1.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/marblerun/pr-preview/pr-910/deployment/kubernetes">latest version</a></b> (<!-- -->1.8<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/marblerun/pr-preview/pr-910/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/marblerun/pr-preview/pr-910/1.1/category/deployment"><span>Deployment</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Kubernetes</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Kubernetes MarbleRun deployment</h1></header>
<p>This guide walks you through setting up MarbleRun in your Kubernetes cluster.</p>
<p>The Kubernetes deployment is managed through the use of a <a href="https://helm.sh/" target="_blank" rel="noopener noreferrer" class="">Helm chart</a>, which can be found in our <a href="https://github.com/edgelesssys/marblerun/tree/master/charts" target="_blank" rel="noopener noreferrer" class="">source repository</a> and installed via our <a href="https://helm.edgeless.systems" target="_blank" rel="noopener noreferrer" class="">Helm repository.</a>
The installation consists of a deployment for the Coordinator and an admission controller.
For more details see our section on <a class="" href="/marblerun/pr-preview/pr-910/1.1/features/kubernetes-integration">Kubernetes Integration</a>.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sgx-device-plugin-on-kubernetes">SGX device plugin on Kubernetes<a href="#sgx-device-plugin-on-kubernetes" class="hash-link" aria-label="Direct link to SGX device plugin on Kubernetes" title="Direct link to SGX device plugin on Kubernetes" translate="no">​</a></h3>
<p>Kubernetes manages hardware resources like Intel SGX through its <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/compute-storage-net/device-plugins/" target="_blank" rel="noopener noreferrer" class="">device plugin framework</a>.
The SGX device plugin can either be deployed manually or as a DaemonSet in the cluster. Different vendors provide open-source device plugins for SGX:</p>
<ul>
<li class=""><a href="https://intel.github.io/intel-device-plugins-for-kubernetes/cmd/sgx_plugin/README.html" target="_blank" rel="noopener noreferrer" class="">Intel</a></li>
<li class=""><a href="https://github.com/AliyunContainerService/sgx-device-plugin" target="_blank" rel="noopener noreferrer" class="">Alibaba Cloud</a></li>
</ul>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>If you are using a confidential computing-enlightened, managed Kubernetes cluster, you will usually already have an SGX device plugin installed.
For example, creating a <a href="https://learn.microsoft.com/en-us/azure/confidential-computing/confidential-enclave-nodes-aks-get-started" target="_blank" rel="noopener noreferrer" class="">confidential computing cluster on AKS</a> comes with a pre-configured SGX device plugin.</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="manually-deploying-an-sgx-device-plugin">Manually deploying an SGX device plugin<a href="#manually-deploying-an-sgx-device-plugin" class="hash-link" aria-label="Direct link to Manually deploying an SGX device plugin" title="Direct link to Manually deploying an SGX device plugin" translate="no">​</a></h3>
<p>For different reasons, you may want to deploy the device plugin manually. Intel provides <a href="https://intel.github.io/intel-device-plugins-for-kubernetes/cmd/sgx_plugin/README.html#installation" target="_blank" rel="noopener noreferrer" class="">a guide</a> to install their SGX plugin.
In any case, you will need to adjust your deployments to request the SGX resources provided by the plugin:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> apps/v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">deployment</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">selector</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">matchLabels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">replicas</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">template</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">labels</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">app</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> oe</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">tolerations</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">key</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> sgx.intel.com/epc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">operator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Exists</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">effect</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> NoSchedule</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;image_name</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;image_reference</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">command</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> &lt;exec</span><span class="token punctuation" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">resources</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">limits</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">sgx.intel.com/epc</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10Mi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">sgx.intel.com/enclave</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token key atrule" style="color:#00a4db">sgx.intel.com/provision</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><br></span></code></pre></div></div>
<p>Note, that every plugin uses its own way of injecting SGX resources into deployments. Please refer to the documentation for your plugin of choice. This is an example of the Intel plugin.</p>
<p>MarbleRun supports <a class="" href="/marblerun/pr-preview/pr-910/1.1/features/kubernetes-integration">automatic injection</a> of those values for a selection of popular plugins:</p>
<ul>
<li class=""><a href="https://intel.github.io/intel-device-plugins-for-kubernetes/cmd/sgx_plugin/README.html" target="_blank" rel="noopener noreferrer" class="">Intel</a> using <code>sgx.intel.com/epc</code>, <code>sgx.intel.com/enclave</code>, and <code>sgx.intel.com/provision</code></li>
<li class=""><a href="https://github.com/AliyunContainerService/sgx-device-plugin" target="_blank" rel="noopener noreferrer" class="">Alibaba Cloud</a> using <code>alibabacloud.com/sgx_epc_MiB</code></li>
<li class="">You can use the <code>--resource-key</code> flag, during installation with the CLI, to declare your own SGX resource key for injection</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>If you are using a different plugin please let us know, so we can add support!</p></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="out-of-process-attestation">Out-of-process attestation<a href="#out-of-process-attestation" class="hash-link" aria-label="Direct link to Out-of-process attestation" title="Direct link to Out-of-process attestation" translate="no">​</a></h3>
<p>Intel SGX supports two modes for obtaining remote attestation quotes:</p>
<ul>
<li class="">In-process: The software generating the quote is part of the enclave application</li>
<li class="">Out-of-process: The software generating the quote isn&#x27;t part of the actual enclave application. This requires the Intel SGX Architectural Enclave Service Manager (AESM) to run on the system</li>
</ul>
<p>While Marbles built with <a class="" href="/marblerun/pr-preview/pr-910/1.1/building-services/ego">Ego</a> perform in-process attestation, other frameworks, such as <a class="" href="/marblerun/pr-preview/pr-910/1.1/building-services/gramine">Gramine</a>, use out-of-process attestation.
If your confidential application uses out-of-process attestation, you will need to expose the AESM device to your container.</p>
<p>You can follow <a href="https://learn.microsoft.com/en-us/azure/confidential-computing/confidential-nodes-aks-addon" target="_blank" rel="noopener noreferrer" class="">the AKS guide</a> to make your deployments able to use AESM for quote generation. Note, that in this case, your Kubernetes nodes need the AESM service installed. See the <a href="https://download.01.org/intel-sgx/sgx-linux/2.12/docs/Intel_SGX_Installation_Guide_Linux_2.12_Open_Source.pdf" target="_blank" rel="noopener noreferrer" class="">Intel installation guide</a> for more information.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-1-install-with-the-marblerun-cli">Option 1: Install with the MarbleRun CLI<a href="#option-1-install-with-the-marblerun-cli" class="hash-link" aria-label="Direct link to Option 1: Install with the MarbleRun CLI" title="Direct link to Option 1: Install with the MarbleRun CLI" translate="no">​</a></h2>
<p>Use MarbleRun&#x27;s <a class="" href="/marblerun/pr-preview/pr-910/1.1/reference/cli">CLI</a> that facilitates the administrative tasks.
You can install MarbleRun using the CLI as follows:</p>
<ul>
<li class="">
<p>For a cluster with SGX support:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">marblerun </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--domain</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mycluster.uksouth.cloudapp.azure.com</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>For a cluster without SGX support:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">marblerun </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--domain</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mycluster.uksouth.cloudapp.azure.com </span><span class="token parameter variable" style="color:#36acaa">--simulation</span><br></span></code></pre></div></div>
</li>
</ul>
<p>This command will pull the latest Helm chart from <a href="https:/helm.edgeless.systems" target="_blank" rel="noopener noreferrer" class="">our repository</a> and manages the installation of said chart.</p>
<p>By default <code>--domain</code> is set to <code>localhost</code>.
The domain is used as the CommonName in the Coordinator&#x27;s TLS certificate.
This certificate is used for the HTTPS communication of the Coordinator&#x27;s client API.
The HTTPS endpoint is exposed via a <a href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types" target="_blank" rel="noopener noreferrer" class="">Kubernetes ClusterIP Service</a>.
If you plan on exposing the endpoint on a public IP, make sure that the domain set via <code>--domain</code> matches the one configured for the public IPs provisioned in your cluster.
On Azure, you can <a href="https://docs.microsoft.com/en-us/azure/aks/static-ip#create-a-static-ip-address" target="_blank" rel="noopener noreferrer" class="">use a static public IP address with the Azure Kubernetes Service (AKS) load balancer</a>.
The client API can be used by users/clients of your application to obtain one concise remote attestation statement for your cluster.</p>
<p>The Coordinator is now in a pending state, waiting for a manifest.
See the <a class="" href="/marblerun/pr-preview/pr-910/1.1/workflows/add-service">how to add a service</a> documentation for more information on how to create and set a manifest.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="option-2-install-with-helm">Option 2: Install with Helm<a href="#option-2-install-with-helm" class="hash-link" aria-label="Direct link to Option 2: Install with Helm" title="Direct link to Option 2: Install with Helm" translate="no">​</a></h2>
<p>Make sure that you are using the latest release of Helm and have access to the MarbleRun Helm repositories. For upgrade instructions, see the <a href="https://docs.helm.sh/using_helm/#installing-helm" target="_blank" rel="noopener noreferrer" class="">Helm install docs</a>. For more information on configuring and using Helm, see <a href="https://learn.microsoft.com/en-us/azure/aks/kubernetes-helm" target="_blank" rel="noopener noreferrer" class="">Install applications with Helm in Azure Kubernetes Service (AKS)</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="adding-marbleruns-helm-repository">Adding MarbleRun&#x27;s Helm repository<a href="#adding-marbleruns-helm-repository" class="hash-link" aria-label="Direct link to Adding MarbleRun&#x27;s Helm repository" title="Direct link to Adding MarbleRun&#x27;s Helm repository" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm repo </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> edgeless https://helm.edgeless.systems/stable</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">helm repo update</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="installing-the-chart">Installing the chart<a href="#installing-the-chart" class="hash-link" aria-label="Direct link to Installing the chart" title="Direct link to Installing the chart" translate="no">​</a></h3>
<p>Note that installing MarbleRun with the <a class="" href="/marblerun/pr-preview/pr-910/1.1/features/kubernetes-integration">marble-injector webhook</a> enabled using Helm requires <a href="https://cert-manager.io/docs/" target="_blank" rel="noopener noreferrer" class="">cert-manager</a> to be installed in your cluster.
Review the <code>values.yaml</code> file of the chart for a full list of available configuration options.</p>
<p>Update the hostname with your cluster&#x27;s FQDN.</p>
<ul>
<li class="">
<p>For a cluster with SGX support:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> marblerun edgeless/marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --create-namespace </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coordinator.hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mycluster.uksouth.cloudapp.azure.com </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">marbleInjector.start</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">marbleInjector.useCertManager</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>For a cluster without SGX support:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> marblerun edgeless/marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --create-namespace </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coordinator.resources</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">null </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coordinator.simulation</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">tolerations</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">null </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coordinator.hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mycluster.uksouth.cloudapp.azure.com </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">marbleInjector.start</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">marbleInjector.useCertManager</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true</span><br></span></code></pre></div></div>
</li>
</ul>
<p>By default <code>coordinator.hostname</code> is set to <code>localhost</code>.
The domain is used as the CommonName in the Coordinator&#x27;s TLS certificate.
This certificate is used for the HTTPS communication of the Coordinator&#x27;s client API.
The HTTPS endpoint is exposed via a <a href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types" target="_blank" rel="noopener noreferrer" class="">Kubernetes ClusterIP Service</a>.
If you plan on exposing the endpoint on a public IP, make sure that the domain set via <code>--domain</code> matches the one configured for the public IPs provisioned in your cluster.
On Azure, you can <a href="https://docs.microsoft.com/en-us/azure/aks/static-ip#create-a-static-ip-address" target="_blank" rel="noopener noreferrer" class="">use a static public IP address with the Azure Kubernetes Service (AKS) load balancer</a>.
The client API can be used by users/clients of your application to obtain one concise remote attestation statement for your cluster.</p>
<p>The Coordinator is now in a pending state, waiting for a manifest.
See the <a class="" href="/marblerun/pr-preview/pr-910/1.1/workflows/add-service">how to add a service</a> documentation for more information on how to create and set a manifest.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="optional-exposing-the-client-api">(Optional) Exposing the client API<a href="#optional-exposing-the-client-api" class="hash-link" aria-label="Direct link to (Optional) Exposing the client API" title="Direct link to (Optional) Exposing the client API" translate="no">​</a></h2>
<p>The Coordinator creates a <a href="https://kubernetes.io/docs/concepts/services-networking/service/#publishing-services-service-types" target="_blank" rel="noopener noreferrer" class=""><code>ClusterIP</code></a> service called <code>coordinator-client-api</code> exposing the client API on the default port 4433.
Depending on your deployment type you may want to deploy an Ingress Gateway forwarding the traffic or create a <a href="https://kubernetes.io/docs/concepts/services-networking/service/#loadbalancer" target="_blank" rel="noopener noreferrer" class=""><code>LoadBalancer</code></a> service to expose the endpoint on a public IP.</p>
<p>You can also use <code>kubectl</code> to forward the port to your local system:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">kubectl </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> marblerun port-forward svc/coordinator-client-api </span><span class="token number" style="color:#36acaa">4433</span><span class="token plain">:4433 </span><span class="token parameter variable" style="color:#36acaa">--address</span><span class="token plain"> localhost</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="ingressgateway-configuration">Ingress/Gateway configuration<a href="#ingressgateway-configuration" class="hash-link" aria-label="Direct link to Ingress/Gateway configuration" title="Direct link to Ingress/Gateway configuration" translate="no">​</a></h3>
<p>If you&#x27;re using an ingress-controller or gateway for managing access to the <code>coordinator-client-api</code> service, make sure you&#x27;re enabling SNI for your TLS connections.</p>
<ul>
<li class="">For the nginx ingress controller add the <a href="https://kubernetes.github.io/ingress-nginx/user-guide/nginx-configuration/annotations/#ssl-passthrough" target="_blank" rel="noopener noreferrer" class=""><code>nginx.ingress.kubernetes.io/ssl-passthrough</code></a> annotation.</li>
<li class="">For Istio Gateways set the <a href="https://istio.io/latest/docs/tasks/traffic-management/ingress/ingress-sni-passthrough/#configure-an-ingress-gateway" target="_blank" rel="noopener noreferrer" class="">tls-mode PASSTHROUGH</a></li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="dcap-configuration">DCAP configuration<a href="#dcap-configuration" class="hash-link" aria-label="Direct link to DCAP configuration" title="Direct link to DCAP configuration" translate="no">​</a></h2>
<p>By default the Coordinator will generate its quote using the <a href="https://github.com/microsoft/Azure-DCAP-Client" target="_blank" rel="noopener noreferrer" class="">Azure-DCAP-Client</a>. If you choose to use this, no additional steps are required.
If you want to use a PCCS other than Azure&#x27;s you can do so by setting the <a href="https://github.com/intel/SGXDataCenterAttestationPrimitives/blob/master/QuoteGeneration/qpl/README.md#configuration" target="_blank" rel="noopener noreferrer" class="">necessary configuration</a> during installation:</p>
<ul>
<li class="">
<p>Using the CLI</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">marblerun </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> --dcap-qpl intel --dcap-pccs-url </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PCCS_URL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> --dcap-secure-cert </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">TRUE/FALSE</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
</li>
<li class="">
<p>Using Helm</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">helm </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> marblerun edgeless/marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      --create-namespace </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token parameter variable" style="color:#36acaa">-n</span><span class="token plain"> marblerun </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">coordinator.hostname</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">mycluster.uksouth.cloudapp.azure.com </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">dcap.qpl</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">intel </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">dcap.pccsUrl</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">PCCS_URL</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token parameter variable" style="color:#36acaa">--set</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">dcap.useSecureCert</span><span class="token operator" style="color:#393A34">=</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">TRUE/FALSE</span><span class="token operator" style="color:#393A34">&gt;</span><br></span></code></pre></div></div>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.1/deployment/kubernetes.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/marblerun/pr-preview/pr-910/1.1/deployment/on-prem"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">On-premises</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/marblerun/pr-preview/pr-910/1.1/deployment/standalone"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Standalone</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#sgx-device-plugin-on-kubernetes" class="table-of-contents__link toc-highlight">SGX device plugin on Kubernetes</a></li><li><a href="#manually-deploying-an-sgx-device-plugin" class="table-of-contents__link toc-highlight">Manually deploying an SGX device plugin</a></li><li><a href="#out-of-process-attestation" class="table-of-contents__link toc-highlight">Out-of-process attestation</a></li></ul></li><li><a href="#option-1-install-with-the-marblerun-cli" class="table-of-contents__link toc-highlight">Option 1: Install with the MarbleRun CLI</a></li><li><a href="#option-2-install-with-helm" class="table-of-contents__link toc-highlight">Option 2: Install with Helm</a><ul><li><a href="#adding-marbleruns-helm-repository" class="table-of-contents__link toc-highlight">Adding MarbleRun&#39;s Helm repository</a></li><li><a href="#installing-the-chart" class="table-of-contents__link toc-highlight">Installing the chart</a></li></ul></li><li><a href="#optional-exposing-the-client-api" class="table-of-contents__link toc-highlight">(Optional) Exposing the client API</a><ul><li><a href="#ingressgateway-configuration" class="table-of-contents__link toc-highlight">Ingress/Gateway configuration</a></li></ul></li><li><a href="#dcap-configuration" class="table-of-contents__link toc-highlight">DCAP configuration</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/edgelesssys/marblerun" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/#footer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Edgeless Systems</div></div></div></footer></div>
</body>
</html>