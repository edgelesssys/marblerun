"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2327],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>i});var r=n(96540);const o={},s=r.createContext(o);function a(e){const t=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),r.createElement(s.Provider,{value:t},e.children)}},66418:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"getting-started/quickstart-sgx","title":"Quickstart SGX","description":"Step 1: Install the control plane onto your cluster","source":"@site/versioned_docs/version-1.1/getting-started/quickstart-sgx.md","sourceDirName":"getting-started","slug":"/getting-started/quickstart-sgx","permalink":"/marblerun/pr-preview/pr-901/1.1/getting-started/quickstart-sgx","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.1/getting-started/quickstart-sgx.md","tags":[],"version":"1.1","frontMatter":{},"sidebar":"docs","previous":{"title":"Quickstart","permalink":"/marblerun/pr-preview/pr-901/1.1/getting-started/quickstart"},"next":{"title":"Quickstart Simulation","permalink":"/marblerun/pr-preview/pr-901/1.1/getting-started/quickstart-simulation"}}');var o=n(74848),s=n(28453);const a={},i="Quickstart SGX",l={},c=[{value:"Step 1: Install the control plane onto your cluster",id:"step-1-install-the-control-plane-onto-your-cluster",level:2},{value:"Step 2: Verify the Coordinator",id:"step-2-verify-the-coordinator",level:2},{value:"Step 3: Deploy the demo application",id:"step-3-deploy-the-demo-application",level:2},{value:"Step 3.1: Configure MarbleRun",id:"step-31-configure-marblerun",level:3},{value:"Step 3.2: Deploy emojivoto",id:"step-32-deploy-emojivoto",level:3},{value:"Step 4: Watch it run",id:"step-4-watch-it-run",level:2},{value:"That\u2019s it \ud83d\udc4f",id:"thats-it-",level:2}];function d(e){const t={a:"a",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"quickstart-sgx",children:"Quickstart SGX"})}),"\n",(0,o.jsx)(t.h2,{id:"step-1-install-the-control-plane-onto-your-cluster",children:"Step 1: Install the control plane onto your cluster"}),"\n",(0,o.jsxs)(t.p,{children:["Install MarbleRun's ",(0,o.jsx)(t.em,{children:"Coordinator"})," control plane by running:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"marblerun install\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.code,{children:"marblerun install"})," command generates a Kubernetes manifest with all the necessary control plane resources.\nThis includes a deployment for the Coordinator and for MarbleRun's ",(0,o.jsx)(t.a,{href:"/marblerun/pr-preview/pr-901/1.1/features/kubernetes-integration",children:"admission controller."})]}),"\n",(0,o.jsx)(t.p,{children:"Wait for the control plane to finish installing:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"marblerun check\n"})}),"\n",(0,o.jsx)(t.p,{children:"This command will wait until all components of MarbleRun are ready to be used or return an error after a timeout period is reached."}),"\n",(0,o.jsx)(t.p,{children:"Port forward the Coordinator's Client API:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"kubectl -n marblerun port-forward svc/coordinator-client-api 4433:4433 --address localhost >/dev/null &\nexport MARBLERUN=localhost:4433\n"})}),"\n",(0,o.jsx)(t.h2,{id:"step-2-verify-the-coordinator",children:"Step 2: Verify the Coordinator"}),"\n",(0,o.jsx)(t.p,{children:"After installing the Coordinator we need to verify its integrity.\nFor this, we utilize SGX remote attestation and obtain the Coordinator's root certificate."}),"\n",(0,o.jsx)(t.p,{children:"Verify the quote and get the Coordinator's root certificate"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"marblerun certificate root $MARBLERUN -o marblerun.crt\n"})}),"\n",(0,o.jsxs)(t.p,{children:["The CLI will obtain the Coordinator's remote attestation quote and verify it against the configuration on our ",(0,o.jsx)(t.a,{href:"https://github.com/edgelesssys/marblerun/releases/latest/download/coordinator-era.json",children:"release page"}),".\nThe SGX quote proves the integrity of the Coordinator pod.\nThe CLI returns a certificate and stores it as ",(0,o.jsx)(t.code,{children:"marblerun.crt"})," in your current directory.\nThe certificate is bound to the quote and can be used for future verification.\nIt can also be used as a root of trust for ",(0,o.jsx)(t.a,{href:"/marblerun/pr-preview/pr-901/1.1/features/attestation",children:"authenticating your confidential applications"}),"."]}),"\n",(0,o.jsx)(t.h2,{id:"step-3-deploy-the-demo-application",children:"Step 3: Deploy the demo application"}),"\n",(0,o.jsxs)(t.p,{children:["To get a feel for how MarbleRun would work for one of your services, you can install a demo application.\nThe emojivoto application is a standalone Kubernetes application that uses a mix of gRPC and HTTP calls to allow the users to vote on their favorite emojis.\nCreated as a demo application for the popular ",(0,o.jsx)(t.a,{href:"https://linkerd.io",children:"Linkerd"})," service mesh, we've made a confidential variant that uses a confidential service mesh for all gRPC and HTTP connections.\nClone the ",(0,o.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto",children:"demo application's repository"})," from GitHub by running:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"git clone https://github.com/edgelesssys/emojivoto && cd emojivoto\n"})}),"\n",(0,o.jsx)(t.h3,{id:"step-31-configure-marblerun",children:"Step 3.1: Configure MarbleRun"}),"\n",(0,o.jsxs)(t.p,{children:["MarbleRun guarantees that the topology of your distributed app adheres to a manifest specified in simple JSON.\nMarbleRun verifies the integrity of services, bootstraps them, and sets up encrypted connections between them.\nThe emojivoto demo already comes with a ",(0,o.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto/blob/main/tools/manifest.json",children:"manifest"}),", which you can deploy onto MarbleRun by running:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"marblerun manifest set tools/manifest.json $MARBLERUN\n"})}),"\n",(0,o.jsx)(t.p,{children:"You can check that the state of MarbleRun changed and is now ready to authenticate your services by running:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"marblerun status $MARBLERUN\n"})}),"\n",(0,o.jsx)(t.h3,{id:"step-32-deploy-emojivoto",children:"Step 3.2: Deploy emojivoto"}),"\n",(0,o.jsxs)(t.p,{children:["Finally, install the demo application onto your cluster.\nPlease make sure you have ",(0,o.jsx)(t.a,{href:"https://helm.sh/docs/intro/install/",children:"Helm"}),' ("the package manager for Kubernetes") installed at least at Version v3.2.0.\nInstall emojivoto into the emojivoto namespace by running:']}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"helm install -f ./kubernetes/sgx_values.yaml emojivoto ./kubernetes --create-namespace -n emojivoto\n"})}),"\n",(0,o.jsx)(t.h2,{id:"step-4-watch-it-run",children:"Step 4: Watch it run"}),"\n",(0,o.jsx)(t.p,{children:"You can now check the MarbleRun log and see the services being authenticated by the Coordinator."}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"kubectl -n marblerun logs -f -l edgeless.systems/control-plane-component=coordinator\n"})}),"\n",(0,o.jsx)(t.p,{children:"Port forward the front-end web service to access it on your local machine by running:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"kubectl -n emojivoto port-forward svc/web-svc 8443:443 --address 0.0.0.0\n"})}),"\n",(0,o.jsxs)(t.p,{children:["Now visit ",(0,o.jsx)(t.a,{href:"https://localhost:8443",children:"https://localhost:8443"}),".\nYou'll be presented with a certificate warning because your browser by default doesn't trust certificates signed by MarbleRun.\nYou can ignore this error for now and proceed to the website.",(0,o.jsx)(t.br,{}),"\n","Voila! Your emoji votes have never been safer!"]}),"\n",(0,o.jsx)(t.h2,{id:"thats-it-",children:"That\u2019s it \ud83d\udc4f"}),"\n",(0,o.jsx)(t.p,{children:"Congratulations, you\u2019re now a MarbleRun user! Here are some suggested next steps:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Explore how ",(0,o.jsx)(t.a,{href:"/marblerun/pr-preview/pr-901/1.1/features/secrets-management",children:"MarbleRun takes care of your secrets"})]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.a,{href:"/marblerun/pr-preview/pr-901/1.1/workflows/add-service",children:"Add your own service"})," to MarbleRun"]}),"\n",(0,o.jsxs)(t.li,{children:["Learn more about ",(0,o.jsx)(t.a,{href:"/marblerun/pr-preview/pr-901/1.1/getting-started/concepts",children:"MarbleRun\u2019s architecture"})]}),"\n",(0,o.jsxs)(t.li,{children:["Try out the full demo on ",(0,o.jsx)(t.a,{href:"https://github.com/edgelesssys/emojivoto",children:"GitHub"})]}),"\n"]}),"\n",(0,o.jsx)(t.p,{children:"Welcome to the MarbleRun community!"})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);