"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[3912],{28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var s=t(96540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}},41297:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>d,frontMatter:()=>l,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"getting-started/installation","title":"Installation and setup","description":"To install MarbleRun into your Kubernetes cluster and manage it, there\'s a dedicated command-line interface (CLI).","source":"@site/versioned_docs/version-1.3/getting-started/installation.md","sourceDirName":"getting-started","slug":"/getting-started/installation","permalink":"/marblerun/pr-preview/pr-932/1.3/getting-started/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.3/getting-started/installation.md","tags":[],"version":"1.3","frontMatter":{},"sidebar":"docs","previous":{"title":"Introduction","permalink":"/marblerun/pr-preview/pr-932/1.3/"},"next":{"title":"First steps","permalink":"/marblerun/pr-preview/pr-932/1.3/getting-started/quickstart"}}');var r=t(74848),i=t(28453);const l={},o="Installation and setup",a={},u=[{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install the MarbleRun CLI",id:"install-the-marblerun-cli",level:2},{value:"Configure the quote provider",id:"configure-the-quote-provider",level:2},{value:"Intel PCS",id:"intel-pcs",level:3},{value:"PCCS of your CSP",id:"pccs-of-your-csp",level:3},{value:"Your own PCCS",id:"your-own-pccs",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{TabItem:t,Tabs:s}=n;return t||h("TabItem",!0),s||h("Tabs",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"installation-and-setup",children:"Installation and setup"})}),"\n",(0,r.jsxs)(n.p,{children:["To install MarbleRun into your Kubernetes cluster and manage it, there's a dedicated command-line interface (CLI).\nThe following guides you through the steps of installing the CLI on your machine and the configuration required to verify the ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-932/1.3/workflows/verification",children:"Coordinator's attestation reports"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsx)(n.p,{children:"Make sure the following requirements are met:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Your machine is running Linux on an x86-64 CPU"}),"\n",(0,r.jsx)(n.li,{children:"You have access to a Kubernetes cluster and kubectl installed and configured"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["An easy way to get started is to run Kubernetes on your local machine using ",(0,r.jsx)(n.a,{href:"https://minikube.sigs.k8s.io/docs/start/",children:"minikube"}),".\nCheck the ",(0,r.jsx)(n.a,{href:"/marblerun/pr-preview/pr-932/1.3/deployment/kubernetes#prerequisites",children:"prerequisites"})," if you want to set up an SGX-enabled cluster.\nAnother easy way is to use ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/aks/learn/quick-kubernetes-deploy-portal",children:"Azure Kubernetes Service (AKS)"}),", which offers SGX-enabled nodes."]}),"\n",(0,r.jsx)(n.p,{children:"You can validate your setup by running the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"kubectl version --short\n"})}),"\n",(0,r.jsx)(n.p,{children:"You should see an output with both a Client Version and a Server Version component.\nNow your cluster is ready and you can install the MarbleRun CLI."}),"\n",(0,r.jsx)(n.h2,{id:"install-the-marblerun-cli",children:"Install the MarbleRun CLI"}),"\n",(0,r.jsxs)(n.p,{children:["CLI executables for different platforms are available at ",(0,r.jsx)(n.a,{href:"https://github.com/edgelesssys/marblerun/releases",children:"GitHub"}),".\nThe CLI needs an SGX ",(0,r.jsx)(n.a,{href:"https://download.01.org/intel-sgx/latest/dcap-latest/linux/docs/DCAP_ECDSA_Orientation.pdf",children:"quote provider"})," to verify attestation reports."]}),"\n",(0,r.jsxs)(s,{groupId:"platform",children:[(0,r.jsxs)(t,{value:"appimage",label:"AppImage",children:[(0,r.jsx)(n.p,{children:"The AppImage runs on all x86-64 Linux distributions with glibc v2.29 or higher.\nIt includes the quote provider.\nInstall it with the following commands:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget https://github.com/edgelesssys/marblerun/releases/latest/download/marblerun-x86_64.AppImage\nsudo install marblerun-x86_64.AppImage /usr/local/bin/marblerun\n"})})]}),(0,r.jsxs)(t,{value:"ub2004",label:"Ubuntu 20.04",children:[(0,r.jsx)(n.p,{children:"Install the CLI and the quote provider with the following commands:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# install CLI\nwget https://github.com/edgelesssys/marblerun/releases/latest/download/marblerun-ubuntu-20.04\nsudo install marblerun-ubuntu-20.04 /usr/local/bin/marblerun\n\n# install quote provider\nsudo mkdir -p /etc/apt/keyrings\nwget -qO- https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key | sudo tee /etc/apt/keyrings/intel-sgx-keyring.asc > /dev/null\necho "deb [signed-by=/etc/apt/keyrings/intel-sgx-keyring.asc arch=amd64] https://download.01.org/intel-sgx/sgx_repo/ubuntu focal main" | sudo tee /etc/apt/sources.list.d/intel-sgx.list\nsudo apt update\nsudo apt install libsgx-dcap-default-qpl\n'})})]}),(0,r.jsxs)(t,{value:"ub2204",label:"Ubuntu 22.04",children:[(0,r.jsx)(n.p,{children:"Install the CLI and the quote provider with the following commands:"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# install CLI\nwget https://github.com/edgelesssys/marblerun/releases/latest/download/marblerun-ubuntu-22.04\nsudo install marblerun-ubuntu-22.04 /usr/local/bin/marblerun\n\n# install quote provider\nwget -qO- https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key | sudo tee /etc/apt/keyrings/intel-sgx-keyring.asc > /dev/null\necho "deb [signed-by=/etc/apt/keyrings/intel-sgx-keyring.asc arch=amd64] https://download.01.org/intel-sgx/sgx_repo/ubuntu jammy main" | sudo tee /etc/apt/sources.list.d/intel-sgx.list\nsudo apt update\nsudo apt install libsgx-dcap-default-qpl\n'})})]})]}),"\n",(0,r.jsx)(n.p,{children:"Once installed, verify the CLI is running correctly with the following:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"marblerun\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can use the CLI to check if your cluster is configured to run SGX workloads:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"marblerun precheck\n"})}),"\n",(0,r.jsx)(n.h2,{id:"configure-the-quote-provider",children:"Configure the quote provider"}),"\n",(0,r.jsxs)(n.p,{children:["The CLI uses the quote provider to retrieve collaterals required for verifying attestation reports.\nLocate its configuration file at ",(0,r.jsx)(n.code,{children:"/etc/sgx_default_qcnl.conf"}),".\nIf the file doesn't exist or is outdated, download it with the following command:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget -qO- https://raw.githubusercontent.com/intel/SGXDataCenterAttestationPrimitives/master/QuoteGeneration/qcnl/linux/sgx_default_qcnl.conf | sudo tee /etc/sgx_default_qcnl.conf > /dev/null\n"})}),"\n",(0,r.jsx)(n.p,{children:"You can configure the quote provider to get the collaterals from the Intel PCS, the PCCS of your cloud service provider (CSP), or your own PCCS."}),"\n",(0,r.jsx)(n.h3,{id:"intel-pcs",children:"Intel PCS"}),"\n",(0,r.jsxs)(n.p,{children:["Using the Intel PCS is the simplest and most generic way to get the collaterals, but it may be slower and less reliable than a PCCS.\nConfigure it by uncommenting the ",(0,r.jsx)(n.code,{children:'"collateral_service"'})," key:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'  ,"collateral_service": "https://api.trustedservices.intel.com/sgx/certification/v4/"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pccs-of-your-csp",children:"PCCS of your CSP"}),"\n",(0,r.jsxs)(n.p,{children:["If you're running MarbleRun in the cloud, it's recommended to use the PCCS of your CSP.\nSet the ",(0,r.jsx)(n.code,{children:'"pccs_url"'})," value to the respective address:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Azure: ",(0,r.jsx)(n.code,{children:"https://global.acccache.azure.net/sgx/certification/v4/"})]}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"https://learn.microsoft.com/en-us/azure/security/fundamentals/trusted-hardware-identity-management#how-do-i-use-intel-qpl-with-trusted-hardware-identity-management",children:"Azure documentation"})," for more information on configuring the quote provider."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Alibaba: ",(0,r.jsx)(n.code,{children:"https://sgx-dcap-server.[Region-ID].aliyuncs.com/sgx/certification/v4/"})]}),"\n",(0,r.jsxs)(n.p,{children:["See the ",(0,r.jsx)(n.a,{href:"https://www.alibabacloud.com/help/en/ecs/user-guide/build-an-sgx-encrypted-computing-environment",children:"Alibaba documentation"})," for supported Region-ID values and more information on configuring the quote provider."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"your-own-pccs",children:"Your own PCCS"}),"\n",(0,r.jsxs)(n.p,{children:["If you're running MarbleRun on premises and have set up your own PCCS for quote generation, you can also use it for quote verification.\nSet the ",(0,r.jsx)(n.code,{children:'"pccs_url"'})," value to the address of your PCCS."]}),"\n",(0,r.jsxs)(n.p,{children:["If your PCCS runs with a certificate not signed by a trusted CA, you need to set ",(0,r.jsx)(n.code,{children:'"use_secure_cert"'})," to ",(0,r.jsx)(n.code,{children:"false"}),".\nThis instructs the quote provider to accept a self-signed certificate of the PCCS.\nIt doesn't affect the security of the remote attestation process itself."]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}function h(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);