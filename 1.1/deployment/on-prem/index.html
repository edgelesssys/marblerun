<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-1.1 docs-doc-page docs-doc-id-deployment/on-prem" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">On-premises MarbleRun deployment | MarbleRun</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.edgeless.systems/marblerun/1.1/deployment/on-prem"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="1.1"><meta data-rh="true" name="docusaurus_tag" content="docs-default-1.1"><meta data-rh="true" name="docsearch:version" content="1.1"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-1.1"><meta data-rh="true" property="og:title" content="On-premises MarbleRun deployment | MarbleRun"><meta data-rh="true" name="description" content="This guide walks you through setting up MarbleRun for your on-premises deployment."><meta data-rh="true" property="og:description" content="This guide walks you through setting up MarbleRun for your on-premises deployment."><link data-rh="true" rel="icon" href="/marblerun/img/favicon.png"><link data-rh="true" rel="canonical" href="https://docs.edgeless.systems/marblerun/1.1/deployment/on-prem"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/marblerun/1.1/deployment/on-prem" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.edgeless.systems/marblerun/1.1/deployment/on-prem" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Deployment","item":"https://docs.edgeless.systems/marblerun/1.1/category/deployment"},{"@type":"ListItem","position":2,"name":"On-premises","item":"https://docs.edgeless.systems/marblerun/1.1/deployment/on-prem"}]}</script><script src="/marblerun/gtagman.js" async data-cookieconsent="ignore"></script><link rel="stylesheet" href="/marblerun/assets/css/styles.85a93fef.css">
<script src="/marblerun/assets/js/runtime~main.b9c7c81d.js" defer="defer"></script>
<script src="/marblerun/assets/js/main.d7a180ab.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/marblerun/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/marblerun/"><div class="navbar__logo"><img src="/marblerun/img/logo.svg" alt="MarbleRun Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/marblerun/img/logo.svg" alt="MarbleRun Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a aria-current="page" class="navbar__link active" aria-haspopup="true" aria-expanded="false" role="button" href="/marblerun/1.1/deployment/on-prem">1.1</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/marblerun/next/">Next</a></li><li><a class="dropdown__link" href="/marblerun/">1.9</a></li><li><a class="dropdown__link" href="/marblerun/1.8/">1.8</a></li><li><a class="dropdown__link" href="/marblerun/1.7/">1.7</a></li><li><a class="dropdown__link" href="/marblerun/1.6/">1.6</a></li><li><a class="dropdown__link" href="/marblerun/1.5/">1.5</a></li><li><a class="dropdown__link" href="/marblerun/1.4/">1.4</a></li><li><a class="dropdown__link" href="/marblerun/1.3/">1.3</a></li><li><a class="dropdown__link" href="/marblerun/1.2/">1.2</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/marblerun/1.1/deployment/on-prem">1.1</a></li></ul></div><a href="https://github.com/edgelesssys/marblerun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-1.1"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/marblerun/1.1/"><span title="Introduction" class="linkLabel_WmDU">Introduction</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/1.1/category/getting-started"><span title="Getting started" class="categoryLinkLabel_W154">Getting started</span></a><button aria-label="Expand sidebar category &#x27;Getting started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/1.1/category/features"><span title="Features" class="categoryLinkLabel_W154">Features</span></a><button aria-label="Expand sidebar category &#x27;Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/marblerun/1.1/category/deployment"><span title="Deployment" class="categoryLinkLabel_W154">Deployment</span></a><button aria-label="Collapse sidebar category &#x27;Deployment&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/1.1/deployment/cloud"><span title="Cloud" class="linkLabel_WmDU">Cloud</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/marblerun/1.1/deployment/on-prem"><span title="On-premises" class="linkLabel_WmDU">On-premises</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/1.1/deployment/kubernetes"><span title="Kubernetes" class="linkLabel_WmDU">Kubernetes</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/marblerun/1.1/deployment/standalone"><span title="Standalone" class="linkLabel_WmDU">Standalone</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/1.1/category/workflows"><span title="Workflows" class="categoryLinkLabel_W154">Workflows</span></a><button aria-label="Expand sidebar category &#x27;Workflows&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/1.1/category/building-services"><span title="Building services" class="categoryLinkLabel_W154">Building services</span></a><button aria-label="Expand sidebar category &#x27;Building services&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/marblerun/1.1/examples"><span title="Examples" class="linkLabel_WmDU">Examples</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/marblerun/1.1/category/reference"><span title="Reference" class="categoryLinkLabel_W154">Reference</span></a><button aria-label="Expand sidebar category &#x27;Reference&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->MarbleRun<!-- --> <b>1.1</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/marblerun/">latest version</a></b> (<!-- -->1.9<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/marblerun/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/marblerun/1.1/category/deployment"><span>Deployment</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">On-premises</span></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 1.1</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>On-premises MarbleRun deployment</h1></header>
<p>This guide walks you through setting up MarbleRun for your on-premises deployment.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="hardware-and-firmware">Hardware and firmware<a href="#hardware-and-firmware" class="hash-link" aria-label="Direct link to Hardware and firmware" title="Direct link to Hardware and firmware" translate="no">​</a></h3>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="cpu">CPU<a href="#cpu" class="hash-link" aria-label="Direct link to CPU" title="Direct link to CPU" translate="no">​</a></h4>
<p>To deploy MarbleRun with Intel SGX, the machine or VM has to support Intel SGX.
Particularly, MarbleRun requires support for the SGX Data Center Attestation Primitives (DCAP).
You can verify <a href="https://www.intel.com/content/www/us/en/support/articles/000057420/software/intel-security-products.html" target="_blank" rel="noopener noreferrer" class="">if your CPU supports DCAP</a>.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="bios">BIOS<a href="#bios" class="hash-link" aria-label="Direct link to BIOS" title="Direct link to BIOS" translate="no">​</a></h4>
<p>BIOS support is required for Intel SGX to provide the capability to enable and configure the Intel SGX feature in the system.
Currently, most of the SGX capable systems have SGX disabled by default in the BIOS. This default setting might change but for now, you need to manually enable it if it&#x27;s not already enabled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="updates">Updates<a href="#updates" class="hash-link" aria-label="Direct link to Updates" title="Direct link to Updates" translate="no">​</a></h4>
<p>As with any modern technology, Intel SGX has been affected by security vulnerabilities. Intel addresses these vulnerabilities by updating the microcode of CPUs, changing the hardware of new CPUs, and updating the system software. Each microcode update that patches an SGX vulnerability requires a BIOS update. During remote attestation, it&#x27;s checked that the microcode of the CPU which is deployed by the BIOS is up to date. The microcode and platform enclaves are commonly called the platform <code>Trusted Computing Base (TCB)</code>.</p>
<p>If your BIOS/firmware is outdated, you will see errors as <code>Platform TCB (2) is not up-to-date (oe_result_t=OE_TCB_LEVEL_INVALID)</code> during remote attestation procedures.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="hypervisor">Hypervisor<a href="#hypervisor" class="hash-link" aria-label="Direct link to Hypervisor" title="Direct link to Hypervisor" translate="no">​</a></h4>
<p>If you are using VMs for your MarbleRun deployment, you need to make sure your hypervisor has SGX enabled.
Most of the popular hypervisors support SGX:</p>
<ul>
<li class=""><a href="https://www.intel.com/content/www/us/en/developer/articles/technical/virtualizing-intel-software-guard-extensions-with-kvm-and-qemu.html" target="_blank" rel="noopener noreferrer" class="">QEMU/KVM</a></li>
<li class=""><a href="https://wiki.xenproject.org/wiki/Xen_and_Intel_Hardware-Assisted_Virtualization_Security" target="_blank" rel="noopener noreferrer" class="">XEN</a></li>
<li class="">Hyper-V: Hyper-V will only expose SGX to Gen 2 VMs</li>
<li class=""><a href="https://blogs.vmware.com/vsphere/2020/04/vsphere-7-vsgx-secure-enclaves.html" target="_blank" rel="noopener noreferrer" class="">VMWare vSphere</a></li>
<li class=""><a href="https://projectacrn.github.io/2.7/tutorials/sgx_virtualization.html" target="_blank" rel="noopener noreferrer" class="">ACRN</a></li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id="driver">Driver<a href="#driver" class="hash-link" aria-label="Direct link to Driver" title="Direct link to Driver" translate="no">​</a></h4>
<p>You need to install the <a href="https://download.01.org/intel-sgx/sgx-dcap/1.11/linux/docs/Intel_SGX_SW_Installation_Guide_for_Linux.pdf" target="_blank" rel="noopener noreferrer" class="">DCAP SGX Driver</a>.
Azure provides the instructions on <a href="https://docs.microsoft.com/en-us/azure/confidential-computing/quick-create-portal#2-install-the-intel-sgx-dcap-driver" target="_blank" rel="noopener noreferrer" class="">how to install this driver</a> that you can use for your on-premises machines.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="sgx-data-center-attestation-primitives-dcap">SGX Data Center Attestation Primitives (DCAP)<a href="#sgx-data-center-attestation-primitives-dcap" class="hash-link" aria-label="Direct link to SGX Data Center Attestation Primitives (DCAP)" title="Direct link to SGX Data Center Attestation Primitives (DCAP)" translate="no">​</a></h3>
<p>DCAP is the new attestation mechanism for SGX <a href="https://www.intel.com/content/www/us/en/developer/articles/technical/an-update-on-3rd-party-attestation.html" target="_blank" rel="noopener noreferrer" class="">replacing EPID</a>.
You can find an overview of DCAP in the <a href="https://download.01.org/intel-sgx/sgx-dcap/1.11/linux/docs/DCAP_ECDSA_Orientation.pdf" target="_blank" rel="noopener noreferrer" class="">official Intel docs</a>.
MarbleRun only supports DCAP and requires DCAP libraries installed and configured on your system.</p>
<p>From the perspective of MarbleRun and your workloads DCAP is accessed with a <a href="https://github.com/intel/confidential-computing.tee.dcap/blob/main/QuoteVerification/README.md" target="_blank" rel="noopener noreferrer" class="">Quote Generation Library (QGL)</a> and a <a href="https://github.com/intel/SGXDataCenterAttestationPrimitives/blob/master/QuoteVerification/README.md" target="_blank" rel="noopener noreferrer" class="">Quote Verification Library (QVL)</a> for generating and verifying quotes respectively.
The QGL and QVL libraries need to be configured to talk to a <a href="https://download.01.org/intel-sgx/sgx-dcap/1.11/linux/docs/DCAP_ECDSA_Orientation.pdf" target="_blank" rel="noopener noreferrer" class="">Provisioning Certificate Caching Service (PCCS)</a>.
You currently have two options regarding PCCS for your on-premises machines and clusters:</p>
<ol>
<li class="">
<p>Use a public PCCS service by configuring your QGL and QVL to point to the public endpoints. Currently, Azure and Alibaba Cloud provide such a service, but require using infrastructure by these providers to make full use of the service.</p>
</li>
<li class="">
<p>Run your own PCCS and expose it to your machine or cluster. See <a href="https://github.com/intel/confidential-computing.tee.dcap/blob/dcap_1.21_reproducible/QuoteGeneration/pccs/README.md" target="_blank" rel="noopener noreferrer" class="">Intel&#x27;s demo reference implementation</a> and <a href="https://download.01.org/intel-sgx/latest/dcap-latest/linux/docs/SGX_DCAP_Caching_Service_Design_Guide.pdf" target="_blank" rel="noopener noreferrer" class="">design guide</a> for more information.</p>
<p>Follow these steps to set up your machines for your PCCS:</p>
<ul>
<li class="">Install the <a href="https://download.01.org/intel-sgx/sgx-dcap/1.11/linux/docs/Intel_SGX_SW_Installation_Guide_for_Linux.pdf" target="_blank" rel="noopener noreferrer" class="">DCAP client libraries</a></li>
<li class="">Install a <a href="https://github.com/intel/SGXDataCenterAttestationPrimitives/blob/master/QuoteGeneration/qpl/README.md#configuration" target="_blank" rel="noopener noreferrer" class="">configuration that points to your PCCS</a></li>
</ul>
<p>The PCCS is a cache, so you need to make sure it stays up to date. In case your cache is outdated, you might see error messages as:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">coordinator-enclave.signed:mbedtls_x509_crt_verify failed with The CRL is expired </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">flags</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">0x20</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">oe_result_t</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">OE_VERIFY_CRL_EXPIRED</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p>You can inspect the Intel Root CA CRL of your PCCS:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--insecure</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--request</span><span class="token plain"> GET </span><span class="token parameter variable" style="color:#36acaa">--url</span><span class="token plain"> https://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">YOUR_PCCS_DOMAIN</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">YOUR_PCCS_PORT</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/sgx/certification/v3/rootcacrl </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> rootca.crl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">openssl crl </span><span class="token parameter variable" style="color:#36acaa">-inform</span><span class="token plain"> DER </span><span class="token parameter variable" style="color:#36acaa">-text</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-noout</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-in</span><span class="token plain"> rootca.crl</span><br></span></code></pre></div></div>
<p>You can refresh all SGX collaterals for your PCCS:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--insecure</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--request</span><span class="token plain"> GET </span><span class="token parameter variable" style="color:#36acaa">-H</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;admin-token: &lt;my password&gt;&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--url</span><span class="token plain"> https://</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">YOUR_PCCS_DOMAIN</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">:</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">YOUR_PCCS_PORT</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain">/sgx/certification/v3/refresh</span><br></span></code></pre></div></div>
<p>If refreshing CRL fails, you can manually delete the <code>pckcache.db</code> database (default location <code>/opt/intel/sgx-dcap-pccs/pckcache.db</code>) and restart your PCCS.</p>
</li>
</ol>
<p>The docker image for the <a href="https://github.com/edgelesssys/marblerun/pkgs/container/marblerun%2Fcoordinator" target="_blank" rel="noopener noreferrer" class="">MarbleRun Coordinator</a> comes with both the Azure-DCAP-Client and the default quote provider library by Intel.
To use your own PCCS, select the Intel library by starting a container with the environment variable <code>DCAP_LIBRARY=intel</code>, and mount the desired configuration to <code>/etc/sgx_default_qcnl.conf</code>.
Similarly, the <a href="https://github.com/orgs/edgelesssys/packages?repo_name=ego" target="_blank" rel="noopener noreferrer" class="">EGo image</a> comes preinstalled with both libraries.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="deploy-marblerun">Deploy MarbleRun<a href="#deploy-marblerun" class="hash-link" aria-label="Direct link to Deploy MarbleRun" title="Direct link to Deploy MarbleRun" translate="no">​</a></h2>
<p>You have made sure your hardware supports SGX, updated all firmware, installed the SGX driver, and configured DCAP on all your machines and VMs?
Great! Now it&#x27;s time to install MarbleRun and get going.</p>
<p>You can either <a class="" href="/marblerun/1.1/deployment/standalone">use MarbleRun in standalone mode</a> or <a class="" href="/marblerun/1.1/deployment/kubernetes">install it in your Kubernetes cluster</a>.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.1/deployment/on-prem.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/marblerun/1.1/deployment/cloud"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/marblerun/1.1/deployment/kubernetes"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Kubernetes</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a><ul><li><a href="#hardware-and-firmware" class="table-of-contents__link toc-highlight">Hardware and firmware</a></li><li><a href="#sgx-data-center-attestation-primitives-dcap" class="table-of-contents__link toc-highlight">SGX Data Center Attestation Primitives (DCAP)</a></li></ul></li><li><a href="#deploy-marblerun" class="table-of-contents__link toc-highlight">Deploy MarbleRun</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/edgelesssys/marblerun" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/#footer" target="_blank" rel="noopener noreferrer" class="footer__link-item">Newsletter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://twitter.com/EdgelessSystems" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/edgeless-systems/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCOOInN0sCv6icUesisYIDeA" target="_blank" rel="noopener noreferrer" class="footer__link-item">Youtube<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Company</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.edgeless.systems/imprint/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Imprint<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.edgeless.systems/privacy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="javascript: Cookiebot.renew()" class="footer__link-item">Cookie Settings</a></li><li class="footer__item"><a href="https://www.edgeless.systems/contact-us/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 Edgeless Systems</div></div></div></footer></div>
</body>
</html>