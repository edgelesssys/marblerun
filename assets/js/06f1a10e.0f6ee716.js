"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2741],{18308:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"building-marbles/ego","title":"Building a service: EGo","description":"To get your Go service ready for MarbleRun, we provide two solutions. With Transparent TLS (TTLS) you are able to use your existing applications without any code changes. Alternatively, you can adapt and recompile your application to manually handle the TLS credentials. Details are given in the following.","source":"@site/versioned_docs/version-1.6/building-marbles/ego.md","sourceDirName":"building-marbles","slug":"/building-marbles/ego","permalink":"/marblerun/1.6/building-marbles/ego","draft":false,"unlisted":false,"editUrl":"https://github.com/edgelesssys/marblerun/edit/master/docs/versioned_docs/version-1.6/building-marbles/ego.md","tags":[],"version":"1.6","frontMatter":{},"sidebar":"docs","previous":{"title":"Keys and cryptography","permalink":"/marblerun/1.6/architecture/security"},"next":{"title":"Gramine","permalink":"/marblerun/1.6/building-marbles/gramine"}}');var i=r(74848),s=r(28453);const t={},l="Building a service: EGo",o={},d=[{value:"TTLS",id:"ttls",level:2},{value:"Manual TLS credentials handling",id:"manual-tls-credentials-handling",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"building-a-service-ego",children:"Building a service: EGo"})}),"\n",(0,i.jsxs)(n.p,{children:["To get your Go service ready for MarbleRun, we provide two solutions. With ",(0,i.jsx)(n.a,{href:"/marblerun/1.6/features/transparent-TLS",children:"Transparent TLS (TTLS)"})," you are able to use your existing applications without any code changes. Alternatively, you can adapt and recompile your application to manually handle the TLS credentials. Details are given in the following."]}),"\n",(0,i.jsx)(n.h2,{id:"ttls",children:"TTLS"}),"\n",(0,i.jsxs)(n.p,{children:["Simply follow the steps on ",(0,i.jsx)(n.a,{href:"/marblerun/1.6/workflows/add-service",children:"adding a service"}),". No code changes and no recompiling needed."]}),"\n",(0,i.jsx)(n.h2,{id:"manual-tls-credentials-handling",children:"Manual TLS credentials handling"}),"\n",(0,i.jsxs)(n.p,{children:["If your service already uses TLS and gets the credentials from, e.g., a file, you just need to ",(0,i.jsx)(n.a,{href:"/marblerun/1.6/workflows/add-service#make-your-service-use-the-provided-tls-credentials",children:"adapt the manifest"}),". Otherwise, you need to make small code changes."]}),"\n",(0,i.jsxs)(n.p,{children:["We provide a convenience package called ",(0,i.jsx)(n.a,{href:"https://pkg.go.dev/github.com/edgelesssys/ego/marble#GetTLSConfig",children:(0,i.jsx)(n.code,{children:"github.com/edgelesssys/ego/marble"})}),". With it, a service can automatically get and use its MarbleRun TLS credentials. The following gives an example."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-Go",children:'    serverCfg, err := marble.GetTLSConfig(false)\n    if err != nil {\n        log.Fatalf("Failed to retrieve server TLS config")\n    }\n    // use serverCfg, e.g., to create an HTTPS server\n'})}),"\n",(0,i.jsxs)(n.p,{children:["Finally, you need to re-build your service for the enclave environment with ",(0,i.jsx)(n.code,{children:"ego-go"})," and sign it with ",(0,i.jsx)(n.code,{children:"ego sign"}),". Please follow the build instructions for Go provided in our ",(0,i.jsx)(n.a,{href:"https://github.com/edgelesssys/marblerun/tree/master/samples/helloworld",children:"Go sample"}),"."]})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},28453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>l});var a=r(96540);const i={},s=a.createContext(i);function t(e){const n=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);